<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ZendoWhisper</title>
    <style>
      body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: #161e24;
        color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        flex-direction: column;
        gap: 0.75rem;
      }
      .spinner {
        width: 24px;
        height: 24px;
        border-radius: 999px;
        border: 2px solid rgba(156, 163, 175, 0.3);
        border-top-color: #f9fafb;
        animation: spin 0.9s linear infinite;
      }
      .offline {
        display: none;
        text-align: center;
      }
      .offline-text {
        font-size: 0.9rem;
        color: #9ca3af;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <!-- Initial loading state: black background + spinner only -->
    <div id="loading-state">
      <div class="spinner"></div>
    </div>

    <!-- No internet state: minimal text -->
    <div id="offline-state" class="offline">
      <div class="offline-text">
        No internet connection. Check your network and try again.
      </div>
    </div>

    <script>
      // In production, APP_URL also lives in TypeScript config, but we keep
      // a minimal copy here so this file can work on its own.
      const APP_URL = "https://app.zendowhisper.com/";

      const loadingState = document.getElementById("loading-state");
      const offlineState = document.getElementById("offline-state");

      function showLoading() {
        if (loadingState) loadingState.style.display = "block";
        if (offlineState) offlineState.style.display = "none";
      }

      function showOffline() {
        if (loadingState) loadingState.style.display = "none";
        if (offlineState) offlineState.style.display = "block";
      }

      function goToApp() {
        showLoading();
        // Small delay so the user can see the loading state before navigation.
        setTimeout(() => {
          window.location.href = APP_URL;
        }, 250);
      }

      function handleStart() {
        if (!navigator.onLine) {
          showOffline();
          return;
        }
        goToApp();
      }

      document.addEventListener("DOMContentLoaded", () => {
        handleStart();

        window.addEventListener("online", () => {
          // If we were offline and come back online, try again.
          if (offlineState && offlineState.style.display === "block") {
            handleStart();
          }
        });

        window.addEventListener("offline", () => {
          showOffline();
        });
      });
    </script>
  </body>
</html>
